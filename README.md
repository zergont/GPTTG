# Telegram‚Äë–±–æ—Ç –Ω–∞ OpenAI¬†Responses¬†API¬†üì®ü§ñ  
[![GitHub](https://img.shields.io/badge/GitHub-GPTTG-blue?logo=github)](https://github.com/zergont/GPTTG)
[![License: MIT](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)

–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π Telegram‚Äë–±–æ—Ç, –ø–æ–∫–∞–∑—ã–≤–∞—é—â–∏–π:

* **OpenAI¬†Responses¬†API** —Å `previous_response_id` ‚Äî –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ö—Ä–∞–Ω–∏—Ç—å –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞  
* **–ú—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω–æ—Å—Ç—å**: —Ç–µ–∫—Å—Ç ‚Ä¢ —Ñ–æ—Ç–æ¬†+ –ø–æ–¥–ø–∏—Å—å ‚Ä¢ –≥–æ–ª–æ—Å¬†(Whisper) ‚Ä¢ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π  
* –£—á—ë—Ç —Ç–æ–∫–µ–Ω–æ–≤ –∏ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –≤ **SQLite**  
* **–†–æ–ª–µ–≤—ã–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã** (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å¬†/ –∞–¥–º–∏–Ω)  
* –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å, —Ç–∞–π–º–∞—É—Ç—ã, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π back‚Äëoff  

---

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
1. [–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è](#0-–ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
2. [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#1-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
3. [–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ-–æ–∫—Ä—É–∂–µ–Ω–∏—è-env)
4. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
5. [–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#–ø—Ä–∏–º–µ—Ä—ã-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
6. [–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–∞–±–æ—Ç–µ —Å —Ñ–∞–π–ª–∞–º–∏](#—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏-–ø–æ-—Ä–∞–±–æ—Ç–µ-—Å-—Ñ–∞–π–ª–∞–º–∏)
7. [–õ–∏—Ü–µ–Ω–∑–∏—è](#–ª–∏—Ü–µ–Ω–∑–∏—è)

---

## 0. –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

> –ü—Ä–æ–ø—É—Å—Ç–∏—Ç–µ —ç—Ç–æ—Ç —à–∞–≥, –µ—Å–ª–∏ `python¬†>=¬†3.9`, `pip` –∏ `poetry` —É–∂–µ –µ—Å—Ç—å –≤¬†`$PATH`.

### –ü—Ä–æ–≤–µ—Ä—è–µ–º Python –∏¬†pip

```bash
python --version          # >= 3.9
python -m pip --version
```

### –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º pip (–µ—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç)

```bash
python -m ensurepip --upgrade
```

### –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Poetry

<details>
<summary>–ß–µ—Ä–µ–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –∏–Ω—Å—Ç–∞–ª–ª–µ—Ä (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)</summary>

```bash
curl -sSL https://install.python-poetry.org | python3 -
exec $SHELL            # –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –æ–±–æ–ª–æ—á–∫—É, —á—Ç–æ–±—ã poetry –ø–æ–ø–∞–ª –≤ PATH
poetry --version
```
</details>

<details>
<summary>–ß–µ—Ä–µ–∑ <code>pipx</code> (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ)</summary>

```bash
pipx install poetry
poetry --version
```
</details>

---

## 1.¬†–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone https://github.com/zergont/GPTTG.git
cd GPTTG
```

### 2. –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

#### –°–ø–æ—Å–æ–±¬†A ‚Äî Poetry¬†(—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –≤–Ω—É—Ç—Ä–∏ –∫–∞—Ç–∞–ª–æ–≥–∞ –ø—Ä–æ–µ–∫—Ç–∞
poetry install          # Poetry —Å–∞–º —Å–æ–∑–¥–∞—Å—Ç .venv
poetry shell            # –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ
```

#### –°–ø–æ—Å–æ–±¬†B ‚Äî venv¬†+¬†pip

```bash
python -m venv .venv
source .venv/bin/activate           # Windows: .venv\Scripts\activate
pip install --upgrade pip
pip install -r requirements.txt
```

### 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
cp .env.example .env
nano .env       # –∏–ª–∏ –ª—é–±–æ–π —Ä–µ–¥–∞–∫—Ç–æ—Ä
```

–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∫–ª—é—á–∏ (`BOT_TOKEN`, `OPENAI_API_KEY`, `ADMIN_ID`).

### 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞

```bash
python -m bot.main
```

> –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è –±–∞–∑–∞¬†`gpttg.db` –∏ —Ç–∞–±–ª–∏—Ü—ã —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏.

---

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|------------|----------|--------|--------------|
| `BOT_TOKEN` | –¢–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ Telegram‚Äë–±–æ—Ç–∞ | `123456:ABC-DEF...` | **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** |
| `OPENAI_API_KEY` | API‚Äë–∫–ª—é—á OpenAI | `sk-...` | **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** |
| `ADMIN_ID` | Telegram¬†ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ | `12345678` | **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** |
| `SYSTEM_PROMPT` | –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ | `–¢—ã ‚Äî –ø–æ–ª–µ–∑–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç.` | `–¢—ã ‚Äî –ø–æ–ª–µ–∑–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç.` |
| `OPENAI_PRICE_PER_1K_TOKENS` | –¶–µ–Ω–∞ 1000¬†—Ç–æ–∫–µ–Ω–æ–≤ (USD) | `0.002` | `0.002` |
| `WHISPER_PRICE` | –¶–µ–Ω–∞ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏ 1¬†–º–∏–Ω –∞—É–¥–∏–æ (USD) | `0.006` | `0.006` |
| `DALLE_PRICE` | –¶–µ–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (USD) | `0.040` | `0.040` |
| `MAX_FILE_MB` | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞,¬†–ú–ë | `20` | `20` |

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```text
GPTTG/
‚îú‚îÄ‚îÄ bot/
‚îÇ   ‚îú‚îÄ‚îÄ handlers/      # –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ utils/         # —É—Ç–∏–ª–∏—Ç—ã: OpenAI, –ë–î, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ config.py      # –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ keyboards.py   # —Ä–æ–ª–µ–≤—ã–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ middlewares.py # –ë–î‚Äë –∏ error‚Äëmiddleware
‚îÇ   ‚îî‚îÄ‚îÄ main.py        # —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ schema.sql         # —Å—Ö–µ–º–∞ –±–∞–∑—ã SQLite
‚îú‚îÄ‚îÄ pyproject.toml     # –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Poetry
‚îú‚îÄ‚îÄ requirements.txt   # –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ pip
‚îú‚îÄ‚îÄ .env.example       # –æ–±—Ä–∞–∑–µ—Ü –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ README.md          # –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
```

---

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```text
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: [–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç PDF] ¬´–°–¥–µ–ª–∞–π –∫—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ —ç—Ç–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞¬ª
–ë–æ—Ç: –ê–Ω–∞–ª–∏–∑ PDF: –î–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç‚Ä¶

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: [–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç CSV] ¬´–ù–∞–π–¥–∏ –∞–Ω–æ–º–∞–ª–∏–∏ –≤ –¥–∞–Ω–Ω—ã—Ö¬ª
–ë–æ—Ç: –ê–Ω–∞–ª–∏–∑ CSV: –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –∞–Ω–æ–º–∞–ª–∏–∏‚Ä¶

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?
–ë–æ—Ç: –ü—Ä–∏–≤–µ—Ç! –£ –º–µ–Ω—è –≤—Å—ë –æ—Ç–ª–∏—á–Ω–æ, —á–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: [–≥–æ–ª–æ—Å–æ–≤–æ–µ] ¬´–†–∞—Å—Å–∫–∞–∂–∏ –∞–Ω–µ–∫–¥–æ—Ç¬ª
–ë–æ—Ç: –í—ã —Å–∫–∞–∑–∞–ª–∏: ¬´–†–∞—Å—Å–∫–∞–∂–∏ –∞–Ω–µ–∫–¥–æ—Ç¬ª
     –ö–æ–Ω–µ—á–Ω–æ! –í–æ—Ç –∑–∞–±–∞–≤–Ω—ã–π –∞–Ω–µ–∫–¥–æ—Ç –¥–ª—è –≤–∞—Å‚Ä¶

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: /img –∫–æ—Å–º–∏—á–µ—Å–∫–∏–π –∫–æ—Ç –≤ —Å–∫–∞—Ñ–∞–Ω–¥—Ä–µ
–ë–æ—Ç: *–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å –∫–æ—Å–º–∏—á–µ—Å–∫–∏–º –∫–æ—Ç–æ–º*
```

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–∞–±–æ—Ç–µ —Å —Ñ–∞–π–ª–∞–º–∏

* –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `purpose: "user_data"`.  
* –î–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `purpose: "vision"`.  
* –°–∫–∞—á–∏–≤–∞—Ç—å –º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ —Ñ–∞–π–ª—ã —Å `purpose` –∏–∑ —Å–ø–∏—Å–∫–∞  
  `assistants_output`, `batch_output`, `fine-tune-results`.  
* –î–ª—è –∫–æ–ª–ª–µ–∫—Ü–∏–π —Å–≤—ã—à–µ¬†10‚ÄØ000 —Ñ–∞–π–ª–æ–≤ –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **Vector¬†Store**.

---

## –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π **MIT** ‚Äî –ø–æ–¥—Ä–æ–±–Ω–µ–µ –≤ —Ñ–∞–π–ª–µ [LICENSE](LICENSE).

---

**–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø—Ä–æ–µ–∫—Ç–∞:** <https://github.com/zergont/GPTTG>
