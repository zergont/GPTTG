# GPTTG ‚Äî Telegram‚Äë–±–æ—Ç –Ω–∞ OpenAI Responses API ü§ñüìÆ

[![GitHub ‚Äî GPTTG](https://img.shields.io/badge/GitHub-GPTTG-blue?logo=github)](https://github.com/zergont/GPTTG)
[![License: MIT](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)
[![Platform](https://img.shields.io/badge/Platform-Windows%20%7C%20Linux-blue)](https://github.com/zergont/GPTTG)

<!-- –¥–æ–±–∞–≤—å—Ç–µ –±–µ–π–¥–∂ CI, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ GitHub Actions -->

> **GPTTG** ‚Äî –∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–π Telegram‚Äë–±–æ—Ç, –ø–æ–∫–∞–∑—ã–≤–∞—é—â–∏–π, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **OpenAI Responses API** –±–µ–∑ —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—Å–µ–π –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–µ–∫—Å—Ç, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –≥–æ–ª–æ—Å (Whisper) –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∫–∞—Ä—Ç–∏–Ω–æ–∫.

---

## ‚ú® –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

* **üîÑ –ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å:** Windows (—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞) + Linux (–ø—Ä–æ–¥–∞–∫—à–µ–Ω)
* **Responses API —Å `previous_response_id`** ‚Äî —ç–∫–æ–Ω–æ–º–∏—Ç —Ç–æ–∫–µ–Ω—ã, –Ω–µ –Ω—É–∂–µ–Ω –ø–æ–ª–Ω—ã–π –ª–æ–≥ –¥–∏–∞–ª–æ–≥–∞
* **–ú—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω–æ—Å—Ç—å:** —Ç–µ–∫—Å—Ç ‚Ä¢ —Ñ–æ—Ç–æ + –ø–æ–¥–ø–∏—Å—å ‚Ä¢ –≥–æ–ª–æ—Å (Whisper) ‚Ä¢ `/img` (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ DALL‚ÄëE)
* –£—á—ë—Ç —Ç–æ–∫–µ–Ω–æ–≤ –∏ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –≤ **SQLite**
* **–†–æ–ª–µ–≤—ã–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã** (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å / –∞–¥–º–∏–Ω)
* –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π back‚Äëoff, —É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–µ —Ç–∞–π–º–∞—É—Ç—ã
* –ü–æ—à–∞–≥–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å –≤—ã–±–æ—Ä–æ–º –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–≥–æ –∏–ª–∏ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞

---

## üìö –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è](#–ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
2. [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
3. [–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞](#—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
4. [–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
5. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
6. [–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#–ø—Ä–∏–º–µ—Ä—ã-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
7. [Responses API ‚Äî –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏](#responses-api-‚Äî-–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏)
8. [–†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏](#—Ä–∞–±–æ—Ç–∞-—Å-—Ñ–∞–π–ª–∞–º–∏)
9. [–õ–∏—Ü–µ–Ω–∑–∏—è](#–ª–∏—Ü–µ–Ω–∑–∏—è)

---

## 1 ¬∑ –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### üñ•Ô∏è Windows (—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
```powershell
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Python 3.9+ —Å python.org
python --version      # >= 3.9

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Poetry
(Invoke-WebRequest -Uri https://install.python-poetry.org -UseBasicParsing).Content | python -

# –ò–ª–∏ —á–µ—Ä–µ–∑ Chocolatey
choco install poetry
```

### üêß Linux (–ø—Ä–æ–¥–∞–∫—à–µ–Ω)
```bash
# –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏–∏
python3 --version      # >= 3.9
python3 -m pip --version

# —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å pip (–µ—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç)
python3 -m ensurepip --upgrade

# —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Poetry
curl -sSL https://install.python-poetry.org | python3 -
exec "$SHELL"           # –æ–±–Ω–æ–≤–∏—Ç–µ PATH
poetry --version
```

---

## 2 ¬∑ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –®–∞–≥ 1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone https://github.com/zergont/GPTTG.git
cd GPTTG
```

### –®–∞–≥ 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**Windows:**
```powershell
Copy-Item .env.example .env
notepad .env   # –∏–ª–∏ –ª—é–±–æ–π —Ä–µ–¥–∞–∫—Ç–æ—Ä
```

**Linux:**
```bash
cp .env.example .env
nano .env   # –∏–ª–∏ –ª—é–±–æ–π —Ä–µ–¥–∞–∫—Ç–æ—Ä
```

–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è ‚Äî `BOT_TOKEN`, `OPENAI_API_KEY`, `ADMIN_ID`.

### –®–∞–≥ 3. –°–æ–∑–¥–∞–π—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

<details>
<summary><strong>–°–ø–æ—Å–æ–± A ‚Äî Poetry (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)</strong></summary>

**Windows:**
```powershell
poetry install           # —Å–æ–∑–¥–∞—Å—Ç .venv –∏ –ø–æ—Å—Ç–∞–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
poetry run python -m bot.main   # –∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –≤—Ä—É—á–Ω—É—é
```

**Linux:**
```bash
poetry install           # —Å–æ–∑–¥–∞—Å—Ç .venv –∏ –ø–æ—Å—Ç–∞–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
poetry run python -m bot.main   # –∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –≤—Ä—É—á–Ω—É—é
```

</details>

<details>
<summary><strong>–°–ø–æ—Å–æ–± B ‚Äî venv + pip</strong></summary>

**Windows:**
```powershell
python -m venv .venv
.venv\Scripts\activate
pip install --upgrade pip
pip install -r requirements.txt

python -m bot.main             # –∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –≤—Ä—É—á–Ω—É—é
```

**Linux:**
```bash
python3 -m venv .venv
source .venv/bin/activate
pip install --upgrade pip
pip install -r requirements.txt

python3 -m bot.main             # –∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –≤—Ä—É—á–Ω—É—é
```

</details>

### –®–∞–≥ 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –∫–∞–∫ systemd‚Äë—Å–µ—Ä–≤–∏—Å (—Ç–æ–ª—å–∫–æ Linux)

–í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ —É–∂–µ –µ—Å—Ç—å –≥–æ—Ç–æ–≤—ã–π —Ñ–∞–π–ª —Å–µ—Ä–≤–∏—Å–∞ `gpttg-bot.service`. –ï–≥–æ –º–æ–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –Ω—É–∂–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥:

```bash
sudo cp gpttg-bot.service /etc/systemd/system/gpttg-bot.service
```

–ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—É—Ç–∏, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è) –ø–æ–¥ –≤–∞—à—É —Å–∏—Å—Ç–µ–º—É.

–ó–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
sudo systemctl daemon-reload
sudo systemctl enable --now gpttg-bot
```

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–º

```bash
sudo systemctl start gpttg-bot     # –∑–∞–ø—É—Å—Ç–∏—Ç—å (–µ—Å–ª–∏ –Ω–µ –∑–∞–ø—É—â–µ–Ω)
sudo systemctl restart gpttg-bot   # –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
sudo systemctl stop gpttg-bot      # –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
sudo systemctl status gpttg-bot    # —Å—Ç–∞—Ç—É—Å + –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ –ª–æ–≥–∞
sudo journalctl -u gpttg-bot -f    # ¬´—Ö–≤–æ—Å—Ç¬ª –ª–æ–≥–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
sudo systemctl enable gpttg-bot    # –≤–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
sudo systemctl disable gpttg-bot   # —É–±—Ä–∞—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
```

### –®–∞–≥ 5. –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (—Ç–æ–ª—å–∫–æ Linux)

–í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –µ—Å—Ç—å —Å–∫—Ä–∏–ø—Ç **`update_bot.sh`**:

```bash
chmod +x update_bot.sh
sudo ./update_bot.sh
```

–°–∫—Ä–∏–ø—Ç:
- –¥–µ–ª–∞–µ—Ç `git pull`
- –æ–±–Ω–æ–≤–ª—è–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (`poetry install`)
- –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–∏—Å
- –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å

**–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏:**
–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ –Ω–∞ GitHub –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 10:00 UTC (13:00 –ú–°–ö) —Å –ø–æ–º–æ—â—å—é –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ aiocron. –ï—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è, –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –ø—Ä–∏—Ö–æ–¥–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º –æ–±–Ω–æ–≤–∏—Ç—å—Å—è.

---

## 3 ¬∑ –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### üîß –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ä–µ–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

<details>
<summary><strong>Windows (PowerShell)</strong></summary>

```powershell
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É
.\dev-setup.ps1

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é:
poetry install
poetry run python -c "from bot.config import settings; print('‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è OK')"
poetry run python -m bot.main
```

</details>

<details>
<summary><strong>Linux/macOS (Bash)</strong></summary>

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É
chmod +x dev-setup.sh
./dev-setup.sh

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é:
poetry install
poetry run python -c "from bot.config import settings; print('‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è OK')"
poetry run python -m bot.main
```

</details>

### üêõ –û—Ç–ª–∞–¥–∫–∞

–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –≤–∫–ª—é—á–∞–µ—Ç –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è:

- **–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞:** Debug –≤–∫–ª—é—á–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- **–ü—Ä–æ–¥–∞–∫—à–µ–Ω:** Debug –≤—ã–∫–ª—é—á–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ debug —Ä–µ–∂–∏–º–∞:
```bash
# –í .env —Ñ–∞–π–ª–µ
DEBUG_MODE=1
```

### üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
poetry run python -c "from bot.config import settings, VERSION; print(f'–í–µ—Ä—Å–∏—è: {VERSION}, –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞: {settings.platform}')"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ API
poetry run python -c "from bot.utils.openai_client import OpenAIClient; import asyncio; asyncio.run(OpenAIClient.get_available_models())"
```

---

## 4 ¬∑ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è                   | –û–ø–∏—Å–∞–Ω–∏–µ                           | –ü—Ä–∏–º–µ—Ä                     | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
| ---------------------------- | ---------------------------------- | -------------------------- | ------------ |
| **`BOT_TOKEN`**              | –¢–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ Telegram‚Äë–±–æ—Ç–∞         | `123456:ABC-DEF...`        | ‚Äî            |
| **`OPENAI_API_KEY`**         | API‚Äë–∫–ª—é—á OpenAI                    | `sk-...`                   | ‚Äî            |
| **`ADMIN_ID`**               | Telegram ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞         | `12345678`                 | ‚Äî            |
| `SYSTEM_PROMPT`              | –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞        | `–¢—ã ‚Äî –ø–æ–ª–µ–∑–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç.` | —Ç–æ –∂–µ        |
| `OPENAI_PRICE_PER_1K_TOKENS` | –¶–µ–Ω–∞ –∑–∞ 1000 —Ç–æ–∫–µ–Ω–æ–≤ (USD)         | `0.002`                    | `0.002`      |
| `WHISPER_PRICE`              | –¶–µ–Ω–∞ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏ 1 –º–∏–Ω –∞—É–¥–∏–æ (USD) | `0.006`                    | `0.006`      |
| `DALLE_PRICE`                | –¶–µ–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∏ (USD)      | `0.040`                    | `0.040`      |
| `MAX_FILE_MB`                | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞, –ú–ë      | `20`                       | `20`         |
| `DEBUG_MODE`                 | –ü–æ–¥—Ä–æ–±–Ω—ã–π –ª–æ–≥ (`0/1`)              | `1`                        | `auto`       |

> –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ—Ç–º–µ—á–µ–Ω—ã **–∂–∏—Ä–Ω—ã–º**.  
> `DEBUG_MODE` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è: `1` –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, `0` –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞.

---

## 5 ¬∑ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

<details>
<summary>–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –¥–µ—Ä–µ–≤–æ —Ñ–∞–π–ª–æ–≤</summary>

```text
GPTTG/
‚îú‚îÄ‚îÄ bot/
‚îÇ   ‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py          # —Å–±–æ—Ä–∫–∞ –≤—Å–µ—Ö —Ä–æ—É—Ç–µ—Ä–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ commands.py          # /start, /help, /img, /stat, /models
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ document.py          # PDF‚Äë–¥–æ–∫—É–º–µ–Ω—Ç—ã —á–µ—Ä–µ–∑ OpenAI Files API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ photo.py             # –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å –º—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω—ã–º –∞–Ω–∞–ª–∏–∑–æ–º
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ text.py              # —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –ø—Ä–æ–≥—Ä–µ—Å—Å-–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ voice.py             # –≥–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (Whisper)
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py          # –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —É—Ç–∏–ª–∏—Ç
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ db.py                # —Ä–∞–±–æ—Ç–∞ —Å SQLite –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ http_client.py       # HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ log.py               # –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ markdown.py          # —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è MarkdownV2
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ openai_client.py     # –æ–±—ë—Ä—Ç–∫–∞ –¥–ª—è OpenAI SDK —Å Responses API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ progress.py          # –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ single_instance.py   # –ø—Ä–æ–≤–µ—Ä–∫–∞ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py              # —ç–∫—Å–ø–æ—Ä—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ router
‚îÇ   ‚îú‚îÄ‚îÄ config.py                # –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ keyboards.py             # inline / reply –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ middlewares.py           # middleware –¥–ª—è –ë–î –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
‚îÇ   ‚îî‚îÄ‚îÄ main.py                  # —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ schema.sql                   # —Å—Ö–µ–º–∞ SQLite –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ pyproject.toml               # –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Poetry
‚îú‚îÄ‚îÄ requirements.txt             # –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ pip (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)
‚îú‚îÄ‚îÄ .env.example                 # –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ dev-setup.sh                 # –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (Linux/macOS)
‚îú‚îÄ‚îÄ dev-setup.ps1                # –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (Windows)
‚îú‚îÄ‚îÄ update_bot.sh                # —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (Linux)
‚îú‚îÄ‚îÄ gpttg-bot.service            # systemd —Å–µ—Ä–≤–∏—Å –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
‚îî‚îÄ‚îÄ README.md                    # —ç—Ç–æ—Ç —Ñ–∞–π–ª
```

</details>

---

## 6 ¬∑ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

| –î–µ–π—Å—Ç–≤–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è             | –û—Ç–≤–µ—Ç –±–æ—Ç–∞                                                             |
| --------------------------------- | ---------------------------------------------------------------------- |
| **PDF**: ¬´–°–¥–µ–ª–∞–π –∫—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ‚Ä¶¬ª | *–ê–Ω–∞–ª–∏–∑ PDF*: –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç‚Ä¶                                       |
| **–¢–µ–∫—Å—Ç**: ¬´–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?¬ª    | –ü—Ä–∏–≤–µ—Ç! –£ –º–µ–Ω—è –≤—Å—ë –æ—Ç–ª–∏—á–Ω–æ, —á–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?                           |
| **–ì–æ–ª–æ—Å**: ¬´–†–∞—Å—Å–∫–∞–∂–∏ –∞–Ω–µ–∫–¥–æ—Ç¬ª     | *–í—ã —Å–∫–∞–∑–∞–ª–∏*: ‚Ä¶<br>–ö–æ–Ω–µ—á–Ω–æ! –í–æ—Ç –∑–∞–±–∞–≤–Ω—ã–π –∞–Ω–µ–∫–¥–æ—Ç‚Ä¶                      |
| `/img` ‚Üí ¬´–ö–æ—Ç –≤ –∫–æ—Å–º–æ—Å–µ¬ª          | *–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ—Ä–º–∞—Ç*: –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π/–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π ‚Üí –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∫–∞—Ä—Ç–∏–Ω–∫–∞ |

---

## 7 ¬∑ Responses API ‚Äî –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

OpenAI Responses API –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–∏–∞–ª–æ–≥–∞, –ø–µ—Ä–µ–¥–∞–≤–∞—è –≤ –∑–∞–ø—Ä–æ—Å **—Ç–æ–ª—å–∫–æ** –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –æ—Ç–≤–µ—Ç–∞:

```python
response = await client.responses.create(
    model="gpt-4o",
    input=[{"type": "message", "content": "–ü—Ä–∏–≤–µ—Ç, –∫–∞–∫ –¥–µ–ª–∞?", "role": "user"}],
    previous_response_id="resp_abc123",  # ID –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –æ—Ç–≤–µ—Ç–∞
    store=True                            # —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –æ—Ç–≤–µ—Ç –¥–ª—è –±—É–¥—É—â–µ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
)
print(response.output[0].content[0].text)
```

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

* —ç–∫–æ–Ω–æ–º–∏—è —Ç–æ–∫–µ–Ω–æ–≤;
* –Ω–µ –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é —Ä–µ–∑–∞—Ç—å –¥–∏–∞–ª–æ–≥;
* –º–æ–∂–Ω–æ ¬´–ø–æ–¥—Ö–≤–∞—Ç–∏—Ç—å¬ª —Ä–∞–∑–≥–æ–≤–æ—Ä —Å–ø—É—Å—Ç—è –≤—Ä–µ–º—è.

---

## 8 ¬∑ –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏

* –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è **—Ç–æ–ª—å–∫–æ PDF** (–¥–ª—è –∞–Ω–∞–ª–∏–∑–∞) –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è PNG / JPEG / WebP.
* –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è `MAX_FILE_MB` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 20 –ú–ë, –º–∞–∫—Å–∏–º—É–º 100 –ú–ë).
* –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ PDF –±–æ—Ç –¥–µ–ª–∞–µ—Ç `purpose="user_data"` –∏ –¥–∞–ª—å—à–µ –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞–¥–∞–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∫ —Ñ–∞–π–ª—É.

---

## 9 ¬∑ –õ–∏—Ü–µ–Ω–∑–∏—è

–ö–æ–¥ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π **MIT** ‚Äî –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ [LICENSE](LICENSE).

---

*–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –æ—Ç–∫—Ä—ã—Ç –¥–ª—è pull‚Äërequest'–æ–≤! –ë—É–¥—É —Ä–∞–¥ –≤–∞—à–∏–º –∏–¥–µ—è–º –∏ —É–ª—É—á—à–µ–Ω–∏—è–º.*
